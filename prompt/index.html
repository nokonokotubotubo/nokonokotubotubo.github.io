<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>メタプロンプトジェネレータ - 高品質なプロンプトを簡単作成</title>
    <meta name="description" content="AIプロンプトの品質を向上させるメタプロンプトを簡単に作成できるツールです。">
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
</head>
<body>
    <!-- スキップリンク -->
    <a href="#main-content" class="skip-link">メインコンテンツへスキップ</a>

    <!-- プログレスバー -->
    <div class="progress-bar">
        <div class="progress-fill"></div>
    </div>

    <!-- メインコンテナ -->
    <div class="container">
        <!-- ヘッダー -->
        <header>
            <h1>🚀 メタプロンプトジェネレータ</h1>
            <p>AIプロンプトの品質を向上させる高度なメタプロンプトを簡単に作成</p>
            
            <!-- ツールバー -->
            <div class="toolbar">
                <button id="darkModeToggle" class="btn-icon" title="ダークモード切替" aria-label="ダークモード切替">
                    🌙
                </button>
                <button id="fontSizeToggle" class="btn-icon" title="フォントサイズ切替" aria-label="フォントサイズ切替">
                    📖
                </button>
                <button id="helpToggle" class="btn-icon" title="ヘルプを表示" aria-label="ヘルプを表示">
                    ❓
                </button>
            </div>
        </header>

        <!-- メインフォーム -->
        <main id="main-content">
            <form id="promptForm" class="prompt-form" novalidate>
                <!-- フォームナビゲーション -->
                <nav class="form-nav" role="tablist">
                    <button type="button" class="nav-step active" role="tab" aria-selected="true" aria-controls="step1">
                        <span class="step-number">1</span>
                        <span class="step-label">基本設定</span>
                    </button>
                    <button type="button" class="nav-step" role="tab" aria-selected="false" aria-controls="step2">
                        <span class="step-number">2</span>
                        <span class="step-label">目的・要求</span>
                    </button>
                    <button type="button" class="nav-step" role="tab" aria-selected="false" aria-controls="step3">
                        <span class="step-number">3</span>
                        <span class="step-label">詳細設定</span>
                    </button>
                    <button type="button" class="nav-step" role="tab" aria-selected="false" aria-controls="step4">
                        <span class="step-number">4</span>
                        <span class="step-label">品質保証</span>
                    </button>
                </nav>

                <!-- Step 1: 基本設定 -->
                <section id="step1" class="form-section active" role="tabpanel">
                    <h2>Step 1: 基本設定</h2>

                    <div class="form-group">
                        <label for="taskType">タスクの種類 <span class="required">*</span></label>
                        <select id="taskType" name="taskType" required>
                            <option value="">選択してください</option>
                            <option value="text-generation">文章生成</option>
                            <option value="summarization">要約・整理</option>
                            <option value="analysis">分析・評価</option>
                            <option value="qa">質疑応答</option>
                            <option value="translation">翻訳・言語変換</option>
                            <option value="code-generation">コード生成</option>
                            <option value="creative">創作・アイデア生成</option>
                            <option value="research">調査・研究</option>
                        </select>
                        <div class="form-help">メタプロンプトが対象とするタスクの種類を選択してください</div>
                    </div>

                    <div class="form-group">
                        <label for="domain">対象ドメイン <span class="required">*</span></label>
                        <select id="domain" name="domain" required>
                            <option value="">選択してください</option>
                            <option value="ビジネス・経営">ビジネス・経営</option>
                            <option value="マーケティング">マーケティング</option>
                            <option value="テクノロジー・IT">テクノロジー・IT</option>
                            <option value="教育・学習">教育・学習</option>
                            <option value="医療・健康">医療・健康</option>
                            <option value="金融・投資">金融・投資</option>
                            <option value="法律・規制">法律・規制</option>
                            <option value="研究・学術">研究・学術</option>
                            <option value="クリエイティブ">クリエイティブ</option>
                            <option value="コンテンツ制作">コンテンツ制作</option>
                            <option value="データサイエンス">データサイエンス</option>
                            <option value="汎用・その他">汎用・その他</option>
                        </select>
                        <div class="form-help">メタプロンプトが扱う専門分野を選択してください</div>
                    </div>

                    <div class="form-group">
                        <label for="outputFormat">出力形式 <span class="required">*</span></label>
                        <select id="outputFormat" name="outputFormat" required>
                            <option value="">選択してください</option>
                            <option value="structured">構造化形式（見出し・箇条書き）</option>
                            <option value="paragraph">段落形式（文章）</option>
                            <option value="list">リスト形式（項目列挙）</option>
                            <option value="table">表形式</option>
                            <option value="markdown">Markdown形式</option>
                            <option value="json">JSON形式</option>
                            <option value="custom">カスタム形式</option>
                        </select>
                        <div class="form-help">メタプロンプトが生成すべき出力の形式を指定してください</div>
                    </div>
                </section>

                <!-- Step 2: 目的・要求の詳細 -->
                <section id="step2" class="form-section" role="tabpanel">
                    <h2>Step 2: 目的・要求の詳細</h2>

                    <div class="form-group">
                        <label for="taskPurpose">メタプロンプトの目的・内容 <span class="required">*</span></label>
                        <textarea id="taskPurpose" name="taskPurpose" rows="6" required></textarea>
                        <div class="form-help">
                            <strong>重要：</strong>このメタプロンプトで何を実現したいかを具体的に記述してください。詳細であるほど高品質なメタプロンプトが生成されます。
                        </div>
                        <div class="character-count">0 / 2000 文字</div>
                    </div>

                    <div class="form-group">
                        <label for="contextInfo">コンテキスト情報</label>
                        <textarea id="contextInfo" name="contextInfo" rows="4"></textarea>
                        <div class="form-help">メタプロンプトが使用される状況や背景情報を記載してください</div>
                        <div class="character-count">0 / 1000 文字</div>
                    </div>

                    <div class="form-group">
                        <label for="targetAudience">対象読者・利用者</label>
                        <select id="targetAudience" name="targetAudience">
                            <option value="general" selected>一般ユーザー</option>
                            <option value="beginner">初心者</option>
                            <option value="intermediate">中級者</option>
                            <option value="expert">専門家・上級者</option>
                            <option value="business">ビジネスユーザー</option>
                            <option value="technical">技術者・開発者</option>
                            <option value="academic">研究者・学術関係者</option>
                        </select>
                        <div class="form-help">メタプロンプトの主な使用者を選択してください</div>
                    </div>
                </section>

                <!-- Step 3: 詳細設定 -->
                <section id="step3" class="form-section" role="tabpanel">
                    <h2>Step 3: 詳細設定</h2>

                    <div class="form-group">
                        <label for="detailLevel">詳細度レベル: <span class="range-value">5 - 標準</span></label>
                        <input type="range" id="detailLevel" name="detailLevel" min="1" max="10" value="5">
                        <div class="range-labels">
                            <span>簡潔</span>
                            <span>詳細</span>
                        </div>
                        <div class="form-help">メタプロンプトの詳細度を調整してください。高い値ほど具体的で詳細なメタプロンプトが生成されます</div>
                    </div>

                    <div class="form-group">
                        <label for="customInstructions">カスタム指示・制約条件</label>
                        <textarea id="customInstructions" name="customInstructions" rows="4"></textarea>
                        <div class="form-help">メタプロンプトに含めたい特別な指示や制約があれば記載してください</div>
                        <div class="character-count">0 / 1000 文字</div>
                    </div>

                    <div class="form-group">
                        <label for="expectedLength">期待する応答長</label>
                        <select id="expectedLength" name="expectedLength">
                            <option value="auto">指定なし</option>
                            <option value="brief">簡潔（100-300文字）</option>
                            <option value="standard" selected>中程度（300-800文字）</option>
                            <option value="detailed">詳細（800-1500文字）</option>
                            <option value="comprehensive">包括的（1500文字以上）</option>
                            <option value="custom">カスタム指定</option>
                        </select>
                        <div class="form-help">メタプロンプトが指定すべき応答の長さを選択してください</div>
                    </div>
                </section>

                <!-- Step 4: 品質保証・ハルシネーション防止 -->
                <section id="step4" class="form-section" role="tabpanel">
                    <h2>Step 4: 品質保証・ハルシネーション防止</h2>

                    <fieldset class="checkbox-group">
                        <legend>ハルシネーション防止機能</legend>
                        
                        <label class="checkbox-label">
                            <input type="checkbox" name="hallucinationPrevention" value="sourceRequirement">
                            <span class="checkmark">情報源の明記要求</span>
                            <div class="form-help">事実情報には必ず出典を明記するよう指示</div>
                        </label>

                        <label class="checkbox-label">
                            <input type="checkbox" name="hallucinationPrevention" value="uncertaintyExpression">
                            <span class="checkmark">不確実性の適切な表現</span>
                            <div class="form-help">断定的な表現を避け、確信度を適切に表現</div>
                        </label>

                        <label class="checkbox-label">
                            <input type="checkbox" name="hallucinationPrevention" value="factChecking">
                            <span class="checkmark">事実確認プロセス</span>
                            <div class="form-help">重要な情報の検証手順を組み込み</div>
                        </label>

                        <label class="checkbox-label">
                            <input type="checkbox" name="hallucinationPrevention" value="stepByStep">
                            <span class="checkmark">段階的思考プロセス</span>
                            <div class="form-help">思考過程を明示的に示すよう指示</div>
                        </label>

                        <label class="checkbox-label">
                            <input type="checkbox" name="hallucinationPrevention" value="limitations">
                            <span class="checkmark">制限事項の明示</span>
                            <div class="form-help">知識の限界や制約を明確に示すよう指示</div>
                        </label>
                    </fieldset>

                    <div class="form-group">
                        <label for="qualityLevel">品質レベル</label>
                        <select id="qualityLevel" name="qualityLevel">
                            <option value="standard" selected>標準</option>
                            <option value="high">高品質</option>
                            <option value="premium">プレミアム</option>
                            <option value="academic">研究・学術レベル</option>
                        </select>
                        <div class="form-help">求める品質レベルを選択してください。高い品質レベルほど厳格な検証プロセスが組み込まれます</div>
                    </div>
                </section>

                <!-- フォームアクション -->
                <div class="form-actions">
                    <div>
                        <button type="button" id="prevBtn" class="btn-secondary">← 前へ</button>
                    </div>

                    <div style="display: flex; gap: var(--spacing-md);">
                        <button type="submit" id="generateBtn" class="btn-primary">
                            <span class="btn-text">🚀 メタプロンプトを生成</span>
                            <span class="btn-loading spinner" style="display: none;">生成中...</span>
                        </button>
                        <button type="reset" class="btn-secondary">🔄 リセット</button>
                    </div>

                    <div>
                        <button type="button" id="nextBtn" class="btn-secondary">次へ →</button>
                    </div>
                </div>
            </form>

            <!-- 生成されたプロンプト出力 -->
            <section id="output" class="output-section" style="display: none;">
                <h2>🎯 生成されたメタプロンプト</h2>
                
                <div class="output-tools">
                    <button id="promptFormat" class="btn-tool-small" title="表示形式切替">🔧 整形</button>
                    <button id="promptZoom" class="btn-tool-small" title="表示サイズ切替">🔍 拡大</button>
                </div>

                <div id="generatedPrompt" class="generated-prompt" tabindex="0" role="textbox" aria-readonly="true"></div>

                <div class="output-actions">
                    <button id="copyBtn" class="btn-tool">📋 コピー</button>
                    <button id="saveBtn" class="btn-tool">💾 テンプレート保存</button>
                    <button id="refineBtn" class="btn-tool">✨ 改善</button>
                    <button id="exportBtn" class="btn-tool">📤 エクスポート</button>
                </div>
            </section>
        </main>

        <!-- サイドバー -->
        <aside class="sidebar">
            <h3>💾 保存済みテンプレート</h3>
            
            <div class="sidebar-tools">
                <button id="templateImport" class="btn-tool-small">📥 インポート</button>
                <button id="templateExport" class="btn-tool-small">📤 エクスポート</button>
            </div>

            <div id="savedTemplates" class="template-list"></div>

            <div class="quick-access">
                <h4>🚀 クイックアクセス</h4>
                <div class="quick-buttons">
                    <button class="quick-btn" data-preset="business-writing">ビジネス文書</button>
                    <button class="quick-btn" data-preset="data-analysis">データ分析</button>
                    <button class="quick-btn" data-preset="creative-content">創作コンテンツ</button>
                    <button class="quick-btn" data-preset="technical-docs">技術文書</button>
                </div>
            </div>
        </aside>
    </div>

    <!-- ヘルプパネル -->
    <div id="helpPanel" class="help-panel" role="dialog" aria-labelledby="help-title" aria-hidden="true">
        <div class="help-content">
            <div class="help-header">
                <h2 id="help-title">❓ ヘルプ</h2>
                <button id="helpClose" class="btn-close" aria-label="ヘルプを閉じる">×</button>
            </div>

            <div class="help-body">
                <section>
                    <h3>📋 使用方法</h3>
                    <ol>
                        <li>「基本設定」でタスクタイプ、ドメイン、出力形式を選択</li>
                        <li>「目的・要求」でメタプロンプトの目的を具体的に記述</li>
                        <li>「詳細設定」で詳細度や制約条件を調整</li>
                        <li>「品質保証」でハルシネーション防止機能を選択</li>
                        <li>「生成」ボタンでメタプロンプトを作成</li>
                    </ol>
                </section>

                <section>
                    <h3>⌨️ ショートカット</h3>
                    <ul>
                        <li><kbd>Ctrl</kbd> + <kbd>Enter</kbd>: メタプロンプト生成</li>
                        <li><kbd>Ctrl</kbd> + <kbd>H</kbd>: ヘルプ表示</li>
                        <li><kbd>Ctrl</kbd> + <kbd>D</kbd>: ダークモード切替</li>
                        <li><kbd>Esc</kbd>: パネルを閉じる</li>
                    </ul>
                </section>

                <section>
                    <h3>💡 品質向上のコツ</h3>
                    <ul>
                        <li><strong>具体性</strong>: 目的を詳細に記述する</li>
                        <li><strong>文脈情報</strong>: 使用場面を明確にする</li>
                        <li><strong>制約条件</strong>: 必要な制限事項を指定する</li>
                        <li><strong>品質保証</strong>: 適切な検証機能を選択する</li>
                    </ul>
                </section>
            </div>
        </div>
    </div>

    <!-- モーダルオーバーレイ -->
    <div id="modalOverlay" class="modal-overlay"></div>

    <!-- 通知コンテナ -->
    <div id="notifications" class="notifications" aria-live="polite"></div>

    <!-- スクリプト -->
    <script src="script.js"></script>
</body>
</html>
